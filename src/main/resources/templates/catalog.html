<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Каталог M-серии | BMW</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background-color: #f8f8f8;
      color: #333;
      line-height: 1.6;
    }

    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Header Styles */
    .header {
      background-color: #1c69d4;
      color: white;
      padding: 15px 0;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header__inner {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
    }

    .logo img {
      height: 40px;
      width: auto;
    }

    .nav__list {
      display: flex;
      list-style: none;
    }

    .nav__list li {
      margin-left: 30px;
    }

    .nav__link {
      color: white;
      text-decoration: none;
      font-weight: 500;
      font-size: 16px;
      position: relative;
      padding: 5px 0;
      transition: all 0.3s ease;
    }

    .nav__link--active {
      font-weight: 700;
    }

    .nav__link--active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background-color: #ffcc00;
      border-radius: 2px;
    }

    .nav__link:hover {
      color: #ffcc00;
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1592198084033-aade902d1aae?ixlib=rb-4.0.3') center/cover no-repeat;
      color: white;
      text-align: center;
      padding: 100px 20px;
      margin-bottom: 50px;
    }

    .hero__title {
      font-size: 3.5rem;
      margin-bottom: 20px;
      font-weight: 700;
    }

    .hero__subtitle {
      font-size: 1.5rem;
      font-weight: 300;
      max-width: 800px;
      margin: 0 auto 30px;
    }

    .btn {
      display: inline-block;
      background-color: #ffcc00;
      color: #000;
      padding: 12px 30px;
      border-radius: 30px;
      text-decoration: none;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.3s ease;
      border: 2px solid #ffcc00;
    }

    .btn:hover {
      background-color: transparent;
      color: #ffcc00;
    }

    /* Catalog Styles */
    .catalog {
      padding: 50px 0;
    }

    .catalog__title {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 40px;
      color: #1c69d4;
      position: relative;
    }

    .catalog__title::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background-color: #ffcc00;
      border-radius: 2px;
    }

    .model-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 30px;
      margin-top: 30px;
    }

    .model-card {
      background-color: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-decoration: none;
      color: #333;
      display: block;
    }

    .model-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
    }

    .model-card__img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      display: block;
    }

    .model-card__info {
      padding: 20px;
    }

    .model-card__name {
      font-size: 1.4rem;
      margin-bottom: 10px;
      color: #1c69d4;
    }

    .model-card__year {
      display: block;
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    /* Model Detail Styles */
    .model-detail {
      padding: 50px 0;
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
      margin: 30px auto;
      max-width: 1000px;
    }

    .model-detail__header {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      margin-bottom: 40px;
      padding: 0 30px;
    }

    .model-detail__image {
      flex: 1;
      min-width: 300px;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .model-detail__image img {
      width: 100%;
      height: auto;
      display: block;
    }

    .model-detail__info {
      flex: 1;
      min-width: 300px;
    }

    .model-detail__name {
      font-size: 2.5rem;
      color: #1c69d4;
      margin-bottom: 15px;
    }

    .model-detail__generation {
      display: block;
      font-size: 1.4rem;
      color: #ff6b00;
      margin-bottom: 20px;
    }

    .model-detail__description {
      margin-bottom: 25px;
      line-height: 1.8;
    }

    .specs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
      margin-top: 30px;
      padding: 0 30px;
    }

    .spec-card {
      background-color: #f0f7ff;
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s ease;
    }

    .spec-card:hover {
      transform: translateY(-5px);
    }

    .spec-card__value {
      font-size: 1.8rem;
      font-weight: 700;
      color: #1c69d4;
      margin-bottom: 5px;
    }

    .spec-card__label {
      font-size: 0.9rem;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Footer Styles */
    .footer {
      background-color: #1c1c1c;
      color: #aaa;
      padding: 40px 0 20px;
      margin-top: 50px;
    }

    .footer__inner {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 30px;
    }

    .footer p {
      flex: 1;
      min-width: 300px;
    }

    .footer__links {
      list-style: none;
    }

    .footer__links li {
      margin-bottom: 10px;
    }

    .footer__links a {
      color: #aaa;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer__links a:hover {
      color: #ffcc00;
    }

    .copyright {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #333;
      width: 100%;
    }

    /* Loading State */
    .loading {
      text-align: center;
      padding: 50px 0;
    }

    .loading-spinner {
      border: 5px solid #f3f3f3;
      border-top: 5px solid #1c69d4;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .error-message {
      background-color: #ffebee;
      color: #d32f2f;
      padding: 20px;
      border-radius: 5px;
      text-align: center;
      margin: 30px 0;
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
      .hero {
        padding: 60px 20px;
      }
      
      .hero__title {
        font-size: 2.5rem;
      }
      
      .hero__subtitle {
        font-size: 1.2rem;
      }
      
      .nav__list li {
        margin-left: 15px;
      }
      
      .model-detail__header {
        flex-direction: column;
        padding: 0 20px;
      }
      
      .specs-grid {
        padding: 0 20px;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container header__inner">
      <a href="#" class="logo">
        <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
          <circle cx="30" cy="30" r="28" stroke="#FFCC00" stroke-width="4"/>
          <path d="M15 20L30 40L45 20" stroke="#FFCC00" stroke-width="4" stroke-linecap="round"/>
          <path d="M20 30L40 30" stroke="#FFCC00" stroke-width="4" stroke-linecap="round"/>
        </svg>
      </a>
      <nav class="nav">
        <ul class="nav__list">
          <li><a class="nav__link" href="#">Главная</a></li>
          <li><a class="nav__link nav__link--active" href="#catalog">Каталог M-серии</a></li>
          <li><a class="nav__link" href="#about">О BMW M</a></li>
          <li><a class="nav__link" href="#contact">Контакты</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <h1 class="hero__title">BMW M Series</h1>
      <p class="hero__subtitle">Официальный каталог легендарных моделей M-серии. Откройте для себя сочетание роскоши, технологий и невероятной производительности.</p>
      <a href="#catalog" class="btn">Исследовать модели</a>
    </div>
  </section>

  <!-- Main Content -->
  <main class="container">
    <!-- Catalog Section -->
    <section class="catalog" id="catalog">
      <h2 class="catalog__title">Каталог M-серии</h2>
      
      <!-- Model Selection -->
      <div class="model-selection">
        <h3>Выберите модель:</h3>
        <div class="model-tabs">
          <button class="model-tab active" data-model="M2">M2</button>
          <button class="model-tab" data-model="M3">M3</button>
          <button class="model-tab" data-model="M4">M4</button>
          <button class="model-tab" data-model="M5">M5</button>
          <button class="model-tab" data-model="M8">M8</button>
        </div>
      </div>
      
      <!-- Models Container -->
      <div class="model-list">
        <!-- Models will be loaded here -->
        <div class="loading">
          <div class="loading-spinner"></div>
          <p>Загрузка моделей...</p>
        </div>
      </div>
    </section>
    
    <!-- Model Detail Section (initially hidden) -->
    <section class="model-detail" id="model-detail" style="display: none;">
      <!-- Model details will be loaded here -->
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer" id="contact">
    <div class="container footer__inner">
      <p>
        <strong>BMW Каталог</strong><br>
        Официальный дилер BMW в России<br>
        Москва, Ленинградский проспект, 39А
      </p>
      
      <ul class="footer__links">
        <li><a href="#">О компании</a></li>
        <li><a href="#">Контакты</a></li>
        <li><a href="#">Тест-драйв</a></li>
        <li><a href="#">Сервис</a></li>
      </ul>
      
      <ul class="footer__links">
        <li><a href="#">Политика конфиденциальности</a></li>
        <li><a href="#">Условия использования</a></li>
        <li><a href="#">Карта сайта</a></li>
      </ul>
      
      <div class="copyright">
        <p>© 2025 BMW Каталог. Все права защищены.</p>
      </div>
    </div>
  </footer>

  <script>
    // API Configuration
    const API_BASE_URL = 'http://localhost:8080/bmw/models';
    
    // DOM Elements
    const modelListContainer = document.querySelector('.model-list');
    const modelDetailContainer = document.getElementById('model-detail');
    const modelTabs = document.querySelectorAll('.model-tab');
    
    // Load models for selected tab
    async function loadModels(modelName) {
      try {
        // Show loading state
        modelListContainer.innerHTML = `
          <div class="loading">
            <div class="loading-spinner"></div>
            <p>Загрузка моделей ${modelName}...</p>
          </div>
        `;
        
        // Fetch models from API
        const response = await fetch(`${API_BASE_URL}/${modelName}`);
        
        if (!response.ok) {
          throw new Error(`Ошибка загрузки: ${response.status}`);
        }
        
        const models = await response.json();
        
        // Render models
        modelListContainer.innerHTML = models.map(model => `
          <div class="model-card" data-id="${model.id}">
            <div class="model-card__img" style="background: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.3)), #1c69d4; display: flex; align-items: center; justify-content: center;">
              <span style="color: white; font-size: 2rem; font-weight: bold;">${model.name} ${model.generation}</span>
            </div>
            <div class="model-card__info">
              <h4 class="model-card__name">${model.name} ${model.generation}</h4>
              <span class="model-card__year">${model.yearStart} год</span>
              <p style="margin-top: 10px; color: #666;">Нажмите для подробной информации</p>
            </div>
          </div>
        `).join('');
        
        // Add click event listeners to model cards
        document.querySelectorAll('.model-card').forEach(card => {
          card.addEventListener('click', () => {
            const modelId = card.getAttribute('data-id');
            loadModelDetails(modelId);
          });
        });
        
      } catch (error) {
        console.error('Ошибка:', error);
        modelListContainer.innerHTML = `
          <div class="error-message">
            <p>Не удалось загрузить модели. Пожалуйста, попробуйте позже.</p>
            <p>${error.message}</p>
          </div>
        `;
      }
    }
    
    // Load model details by ID
    async function loadModelDetails(modelId) {
      try {
        // Show loading state
        modelDetailContainer.innerHTML = `
          <div class="loading">
            <div class="loading-spinner"></div>
            <p>Загрузка деталей модели...</p>
          </div>
        `;
        modelDetailContainer.style.display = 'block';
        
        // Scroll to details
        modelDetailContainer.scrollIntoView({ behavior: 'smooth' });
        
        // Fetch model details from API
        const response = await fetch(`${API_BASE_URL}/id/${modelId}`);
        
        if (!response.ok) {
          throw new Error(`Ошибка загрузки: ${response.status}`);
        }
        
        const model = await response.json();
        
        // Render model details
        modelDetailContainer.innerHTML = `
          <div class="model-detail__header">
            <div class="model-detail__image">
              <div style="background: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.3)), #1c69d4; height: 300px; display: flex; align-items: center; justify-content: center;">
                <span style="color: white; font-size: 2.5rem; font-weight: bold;">${model.name} ${model.generation}</span>
              </div>
            </div>
            <div class="model-detail__info">
              <h2 class="model-detail__name">${model.name}</h2>
              <span class="model-detail__generation">${model.generation}</span>
              <p class="model-detail__description">${model.description}</p>
              <div class="model-detail__spec">
                <p><strong>Год выпуска:</strong> ${model.yearStart}</p>
                <p><strong>Тип кузова:</strong> ${model.bodyType}</p>
              </div>
            </div>
          </div>
          
          <div class="specs-grid">
            <div class="spec-card">
              <div class="spec-card__value">${model.engine}</div>
              <div class="spec-card__label">Двигатель</div>
            </div>
            <div class="spec-card">
              <div class="spec-card__value">${model.powerHp} л.с.</div>
              <div class="spec-card__label">Мощность</div>
            </div>
            <div class="spec-card">
              <div class="spec-card__value">${model.transmission}</div>
              <div class="spec-card__label">Трансмиссия</div>
            </div>
            <div class="spec-card">
              <div class="spec-card__value">${model.drive}</div>
              <div class="spec-card__label">Привод</div>
            </div>
            <div class="spec-card">
              <div class="spec-card__value">${model.acceleration} сек</div>
              <div class="spec-card__label">0-100 км/ч</div>
            </div>
            <div class="spec-card">
              <div class="spec-card__value">${model.maxSpeed} км/ч</div>
              <div class="spec-card__label">Макс. скорость</div>
            </div>
            <div class="spec-card">
              <div class="spec-card__value">${model.fuelConsumption} л/100км</div>
              <div class="spec-card__label">Расход топлива</div>
            </div>
          </div>
          
          <div style="text-align: center; margin-top: 30px; padding: 0 30px;">
            <button id="back-to-catalog" class="btn" style="background: #1c69d4; color: white; border-color: #1c69d4;">
              Вернуться к каталогу
            </button>
          </div>
        `;
        
        // Add event listener to back button
        document.getElementById('back-to-catalog').addEventListener('click', () => {
          modelDetailContainer.style.display = 'none';
        });
        
      } catch (error) {
        console.error('Ошибка:', error);
        modelDetailContainer.innerHTML = `
          <div class="error-message">
            <p>Не удалось загрузить детали модели. Пожалуйста, попробуйте позже.</p>
            <p>${error.message}</p>
          </div>
          <div style="text-align: center; margin-top: 20px;">
            <button id="back-to-catalog" class="btn">Вернуться к каталогу</button>
          </div>
        `;
        
        document.getElementById('back-to-catalog').addEventListener('click', () => {
          modelDetailContainer.style.display = 'none';
        });
      }
    }
    
    // Initialize the page
    document.addEventListener('DOMContentLoaded', () => {
      // Set initial model tab as active
      modelTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          // Remove active class from all tabs
          modelTabs.forEach(t => t.classList.remove('active'));
          
          // Add active class to clicked tab
          tab.classList.add('active');
          
          // Load models for selected tab
          const modelName = tab.getAttribute('data-model');
          loadModels(modelName);
        });
      });
      
      // Load initial models (M2)
      loadModels('M2');
    });
  </script>
</body>
</html>